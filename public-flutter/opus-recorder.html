<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Opus Recorder</title>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/opus-media-recorder/dist/opus-media-recorder.min.js"></script>
  <script>
    navigator.mediaDevices.getUserMedia({ audio: true })
      .then(function(stream) {
        const mediaRecorder = new OpusMediaRecorder(stream);
        const recordedChunks = [];

        mediaRecorder.addEventListener('dataavailable', function(e) {
          recordedChunks.push(e.data);
        });

        mediaRecorder.addEventListener('stop', function() {
          const audioBlob = new Blob(recordedChunks, { type: 'audio/opus' });
          window.opusRecorderCallback(audioBlob);
        });

        mediaRecorder.start();

        setTimeout(function() {
          mediaRecorder.stop();
        }, 10000); // Stop recording after 10 seconds
      });
  </script>
</body>
</html>
